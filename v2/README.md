# 手绳编织助手微信小程序

这是一个根据输入的原始绳子顺序和期望的绳结颜色排列顺序生成最佳打结方式的微信小程序。

## 功能特点

1. **绳子配置**：支持4-12股绳子配置（必须为偶数）
2. **颜色选择**：提供8种预定义颜色（红、蓝、绿、黄、白、黑、紫、橙）
3. **目标图案设置**：可视化配置期望的绳结颜色排列
4. **智能算法**：使用回溯算法生成最佳编织方案
5. **图形化显示**：直观展示编织过程和状态变化
6. **分享功能**：支持分享编织方案

## 项目结构

```
v2/
├── app.js                 # 小程序主文件
├── app.json              # 小程序配置
├── app.wxss              # 全局样式
├── sitemap.json          # 站点地图配置
├── pages/                # 页面目录
│   ├── index/           # 首页
│   │   ├── index.js     # 首页逻辑
│   │   ├── index.wxml   # 首页模板
│   │   ├── index.wxss   # 首页样式
│   │   └── index.json   # 首页配置
│   └── result/          # 结果页
│       ├── result.js    # 结果页逻辑
│       ├── result.wxml  # 结果页模板
│       ├── result.wxss  # 结果页样式
│       └── result.json  # 结果页配置
└── server/              # 后端服务
    ├── app.py           # Flask API服务
    └── requirements.txt # Python依赖
```

## 使用说明

### 1. 配置绳子
- 选择绳子股数（4、6、8、10、12股）
- 为每根绳子选择颜色

### 2. 设置目标图案
- 点击"添加行"创建新的绳结行
- 为每个绳结选择期望的颜色
- 奇数行和偶数行的绳结数量会自动计算

### 3. 生成方案
- 点击"生成编织方案"
- 系统会计算最佳的打结方式
- 显示详细的编织步骤和状态变化

### 4. 查看结果
- 图形化显示编织过程
- 箭头表示不同的打结方式：
  - 右右：斜向右下的箭头
  - 左左：斜向左下的箭头
  - 右左：先向右下再向左下的箭头
  - 左右：先向左下再向右下的箭头

## 技术实现

### 前端
- 微信小程序原生开发
- 使用Canvas绘制图形化结果
- 响应式设计，适配不同屏幕

### 后端
- Flask API服务
- 集成绳结算法（biansheng_v5_perfect.py）
- 支持CORS跨域请求

### 算法
- 回溯算法生成所有可能的编织方案
- 简洁度评分选择最佳方案
- 支持复杂的多行编织模式

## 安装和运行

### 1. 前端（微信小程序）
1. 使用微信开发者工具打开项目
2. 配置AppID（测试时可使用测试号）
3. 编译运行

### 2. 后端服务
```bash
cd server
pip install -r requirements.txt
python app.py
```

### 3. 配置API地址
在 `pages/index/index.js` 中修改 `apiBaseUrl` 为你的服务器地址。

## 算法说明

### 打结规则
- **右右（RR）**：压在上面的绳子尾端水平向右，交换位置
- **左左（LL）**：压在上面的绳子尾端水平向左，交换位置
- **右左（RL）**：先向右下再向左下，保持位置
- **左右（LR）**：先向左下再向右下，保持位置

### 状态转换
- 奇数行：从第0个位置开始，每2个绳子为一组
- 偶数行：从第1个位置开始，每2个绳子为一组
- 根据打结类型计算新的绳子排列顺序

## 注意事项

1. 绳子股数必须为偶数
2. 每行的绳结数量需要符合算法规则
3. 确保所有颜色都已正确设置
4. 复杂的图案可能需要较长的计算时间

## 扩展功能

- 支持更多颜色选项
- 添加编织动画演示
- 保存和分享编织历史
- 支持自定义打结规则
- 添加编织难度评估

## 许可证

MIT License 